{"version":3,"file":null,"sources":["../../hybrid-inline/app.js"],"sourcesContent":["import {\n  ProseEditor, ProseEditorConfigurator, EditorSession, InlineNode,\n  ProseEditorPackage, TextPropertyEditor, InlineNodeComponent\n} from 'substance'\n\n/*\n  Node definition\n*/\nclass HybridInlineNode extends InlineNode {\n  getEvaluatedValue() {\n    var result\n    try {\n      result = window.eval(this.value) // eslint-disable-line no-eval\n    } catch (err) {\n      console.error(err)\n      result = \"ERROR\"\n    }\n    return result\n  }\n}\n\nHybridInlineNode.define({\n  type: 'hybrid-inline',\n  content: { type: 'text', default: ' ' }\n})\n\n/*\n  Node display component\n*/\nclass HybridInlineComponent extends InlineNodeComponent {\n\n  didMount() {\n    super.didMount()\n    this.context.editorSession.onRender('document', this.rerender, this, {\n      path: [this.props.node.id, 'content']\n    })\n  }\n\n  dispose() {\n    super.dispose()\n    this.context.editorSession.off(this)\n  }\n\n  getClassNames() {\n    // ATTENTION: ATM it is necessary to add .sc-inline-node\n    return 'sc-hybrid-inline sc-inline-node'\n  }\n\n  renderContent($$) {\n    var node = this.props.node\n    var el = $$(TextPropertyEditor, {\n      disabled: this.isDisabled(),\n      tagName: 'span',\n      path: [node.id, 'content'],\n      withoutBreak: true\n    }).ref('content')\n    return el\n  }\n}\n\n/*\n  Package definition of your inline image plugin\n*/\nconst HybridInlinePackage = {\n  name: 'hybrid-inline',\n  configure: function(config) {\n    config.addNode(HybridInlineNode)\n    config.addComponent(HybridInlineNode.type, HybridInlineComponent)\n    config.addLabel('hybrid-inline.content', 'Hybrid Inline')\n  }\n}\n\n/*\n  Example document\n*/\nconst fixture = function(tx) {\n  let body = tx.get('body')\n  tx.create({\n    id: 'title',\n    type: 'heading',\n    level: 1,\n    content: 'Inline Property Editor'\n  })\n  body.show('title')\n  tx.create({\n    id: 'intro',\n    type: 'paragraph',\n    content: [\n      \"This shows an $, which renders a property editor\",\n      \"in the flow of the text, creating an interface similar to a regular annotations.\",\n      \"Still, in contrast to an annotation the content is owned by the inline node.\"\n    ].join(' ')\n  })\n  tx.create({\n    type: 'hybrid-inline',\n    id: 'i1',\n    path: ['intro', 'content'],\n    startOffset: 14,\n    endOffset: 15,\n    content: 'inline property',\n  })\n  body.show('intro')\n}\n\n/*\n  Application\n*/\n\nlet cfg = new ProseEditorConfigurator()\ncfg.import(ProseEditorPackage)\ncfg.import(HybridInlinePackage)\n\nwindow.onload = function() {\n  let doc = cfg.createArticle(fixture)\n  let editorSession = new EditorSession(doc, {\n    configurator: cfg\n  })\n  ProseEditor.mount({\n    editorSession: editorSession\n  }, document.body)\n}\n"],"names":["InlineNode","InlineNodeComponent","TextPropertyEditor","ProseEditorConfigurator","ProseEditorPackage","EditorSession","ProseEditor"],"mappings":"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"}