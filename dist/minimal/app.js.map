{"version":3,"file":null,"sources":["../../minimal/TextTools.js","../../minimal/AnnotationTools.js","../../minimal/MinimalEditor.js","../../minimal/fixture.js","../../minimal/app.js"],"sourcesContent":["import { Toolbox } from 'substance'\n\n/*\n  A default implementation to render the content for the overlay (aka popup) tools.\n*/\nclass TextTools extends Toolbox {\n\n  didMount() {\n    super.didMount()\n    this.context.scrollPane.on('overlay:position', this._position, this)\n  }\n\n  dispose() {\n    super.dispose()\n    this.context.scrollPane.off(this)\n  }\n\n  render($$) {\n    let el = $$('div').addClass(this.getClassNames())\n    el.addClass('sm-hidden')\n    el.addClass('sm-theme-'+this.getTheme())\n    let activeToolGroups = this.state.activeToolGroups\n    let activeToolsEl = $$('div').addClass('se-active-tools')\n\n    activeToolGroups.forEach((toolGroup) => {\n      let toolGroupProps = Object.assign({}, toolGroup, {\n        toolStyle: this.getToolStyle(),\n        showIcons: true\n      })\n      activeToolsEl.append(\n        $$(toolGroup.Class, toolGroupProps)\n      )\n    })\n    el.append(activeToolsEl)\n    return el\n  }\n\n  hide() {\n    this.el.addClass('sm-hidden')\n  }\n\n  /*\n    Update and re-position\n  */\n  _position(hints) {\n    if (this.hasActiveTools()) {\n      this.el.removeClass('sm-hidden')\n      if (hints) {\n        let contentWidth = this.el.htmlProp('offsetWidth')\n        let selRect = hints.selectionRect\n        let innerContentRect = hints.innerContentRect\n\n        // By default, gutter is centered (y-axis) and left of the scrollPane content (x-axis)\n        this.el.css('top', selRect.top + selRect.height - selRect.height / 2)\n        // Right align to the gutter\n        this.el.css('left', innerContentRect.left - contentWidth)\n      }\n    } else {\n      this.el.addClass('sm-hidden')\n    }\n  }\n\n  /*\n    Override if you just want to use a different style\n  */\n  getToolStyle() {\n    return 'outline'\n  }\n\n  getClassNames() {\n    return 'sc-text-tools'\n  }\n\n  getTheme() {\n    return 'dark'\n  }\n\n  getActiveToolGroupNames() {\n    return ['text']\n  }\n\n}\n\nexport default TextTools\n","import TextTools from './TextTools'\n\n/*\n  A default implementation to render the content for the overlay (aka popup) tools.\n*/\nclass AnnotationTools extends TextTools {\n\n  getActiveToolGroupNames() {\n    return ['annotations']\n  }\n\n  _position(hints) {\n    if (this.hasActiveTools()) {\n      this.el.removeClass('sm-hidden')\n      if (hints) {\n        let contentWidth = this.el.htmlProp('offsetWidth')\n        let selRect = hints.selectionRect\n        let innerContentRect = hints.innerContentRect\n\n        // By default, gutter is centered (y-axis) and left of the scrollPane content (x-axis)\n        this.el.css('top', selRect.top + selRect.height - selRect.height / 2)\n        // left align to the right gutter\n        this.el.css('left', hints.contentWidth - innerContentRect.right)\n      }\n    } else {\n      this.el.addClass('sm-hidden')\n    }\n  }\n\n}\n\nexport default AnnotationTools\n","import { ProseEditor, ContainerEditor } from 'substance'\nimport TextTools from './TextTools'\nimport AnnotationTools from './AnnotationTools'\n\nclass MinimalEditor extends ProseEditor {\n\n  render($$) {\n    let el = $$('div').addClass('sc-minimal-editor')\n    let editor = this._renderEditor($$)\n    let ScrollPane = this.componentRegistry.get('scroll-pane')\n    let Overlay = this.componentRegistry.get('overlay')\n    let ContextMenu = this.componentRegistry.get('context-menu')\n\n    let scrollPane = $$(ScrollPane, {\n      noStyle: true\n    }).append(\n      $$('div').addClass('se-minimal-editor-content').append(\n        editor\n      ),\n      // Overlays\n      $$(Overlay),\n      $$(TextTools),\n      $$(AnnotationTools),\n      $$(ContextMenu)\n    )\n\n    el.append(scrollPane)\n    return el\n  }\n\n  _renderEditor($$) {\n    let configurator = this.getConfigurator()\n    return $$(ContainerEditor, {\n      disabled: this.props.disabled,\n      editorSession: this.editorSession,\n      node: this.doc.get('body'),\n      commands: configurator.getSurfaceCommandNames(),\n      textTypes: configurator.getTextTypes()\n    }).ref('body')\n  }\n}\n\nexport default MinimalEditor\n","/*\n  Example document\n*/\nexport default function(tx) {\n  let body = tx.get('body')\n  tx.create({\n    id: 'p1',\n    type: 'paragraph',\n    content: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc fermentum orci sed interdum porta. Duis nulla tortor, luctus eu enim at, rhoncus rhoncus enim. Donec diam arcu, dapibus id mattis pellentesque, elementum accumsan nisi. In hendrerit, lacus ut sollicitudin placerat, arcu quam sollicitudin tellus, at sodales risus est vel risus. Pellentesque cursus semper ex, eget finibus tellus lacinia at. Phasellus ut metus venenatis, euismod nulla quis, luctus dolor. Integer ornare, lacus ut dignissim laoreet, enim ipsum lobortis arcu, pellentesque vestibulum mi erat quis justo. Aliquam ac nibh sed turpis bibendum semper. Duis dui velit, mattis in ligula non, volutpat porta nulla. Integer non posuere eros, a tincidunt neque. Donec fermentum, est vitae maximus venenatis, tellus magna venenatis nisi, ac scelerisque augue tortor vehicula lacus. Nullam fringilla dictum augue a ullamcorper.\"\n  })\n  body.show('p1')\n  tx.create({\n    id: 'p2',\n    type: 'paragraph',\n    content: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc fermentum orci sed interdum porta. Duis nulla tortor, luctus eu enim at, rhoncus rhoncus enim. Donec diam arcu, dapibus id mattis pellentesque, elementum accumsan nisi. In hendrerit, lacus ut sollicitudin placerat, arcu quam sollicitudin tellus, at sodales risus est vel risus. Pellentesque cursus semper ex, eget finibus tellus lacinia at. Phasellus ut metus venenatis, euismod nulla quis, luctus dolor. Integer ornare, lacus ut dignissim laoreet, enim ipsum lobortis arcu, pellentesque vestibulum mi erat quis justo. Aliquam ac nibh sed turpis bibendum semper. Duis dui velit, mattis in ligula non, volutpat porta nulla. Integer non posuere eros, a tincidunt neque. Donec fermentum, est vitae maximus venenatis, tellus magna venenatis nisi, ac scelerisque augue tortor vehicula lacus. Nullam fringilla dictum augue a ullamcorper.\"\n  })\n  body.show('p2')\n}","import {\n  ProseEditor, ProseEditorConfigurator, EditorSession,\n  ProseEditorPackage, HeadingMacro\n} from 'substance'\n\nimport MinimalEditor from './MinimalEditor'\nimport fixture from './fixture'\n\n/*\n  Application\n*/\n\nlet cfg = new ProseEditorConfigurator()\ncfg.import(ProseEditorPackage)\ncfg.addMacro(HeadingMacro)\n\nwindow.onload = function() {\n  let doc = cfg.createArticle(fixture)\n  let editorSession = new EditorSession(doc, {\n    configurator: cfg\n  })\n  MinimalEditor.mount({\n    editorSession: editorSession\n  }, document.body)\n}\n"],"names":["Toolbox","ProseEditor","ContainerEditor","ProseEditorConfigurator","ProseEditorPackage","HeadingMacro","EditorSession"],"mappings":"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"}