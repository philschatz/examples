{"version":3,"file":null,"sources":["../../input/app.js"],"sourcesContent":["import {\n  ProseEditor, ProseEditorConfigurator, EditorSession, DocumentNode,\n  ProseEditorPackage, Component\n} from 'substance'\n\n/*\n  Node definition\n*/\nclass InputNode extends DocumentNode {}\n\nInputNode.defineSchema({\n  type: 'input-node',\n  content: { type: 'string', default: '' }\n})\n\n/*\n  Node display component\n*/\nclass InputComponent extends Component {\n  didMount() {\n    // Register for model side updates\n    this.context.editorSession.onRender('document', this.onContentChange, this, {\n      path: [this.props.node.id, 'content']\n    })\n  }\n\n  // And please always deregister\n  dispose() {\n    this.context.editorSession.off(this)\n  }\n\n  render($$) {\n    let el = $$('div').addClass('sc-input-node')\n    let input = $$('input').ref('input')\n      .val(this.props.node.content)\n      .on('change', this.onChange)\n    // you should disable the input when the parent asks you to do so\n    if (this.props.disabled) {\n      input.attr('disabled', true)\n    }\n\n    el.append(input)\n    return el\n  }\n\n  // this is called when the input's content has been changed\n  onChange() {\n    let editorSession = this.context.editorSession\n    let node = this.props.node\n    let newVal = this.refs.input.val()\n    editorSession.transaction(function(tx) {\n      tx.set([node.id, 'content'], newVal)\n    })\n  }\n\n  // this is called when the model has changed, e.g. on undo/redo\n  onContentChange() {\n    this.refs.input.val(this.props.node.content)\n  }\n}\n\n/*\n  Package definition of your plugin\n*/\nconst InputPackage = {\n  name: 'input',\n  configure: function(config) {\n    config.addNode(InputNode)\n    config.addComponent(InputNode.type, InputComponent)\n    config.addLabel('input', 'Input')\n  }\n}\n\n/*\n  Example document\n*/\nconst fixture = function(tx) {\n  let body = tx.get('body')\n  tx.create({\n    id: 'title',\n    type: 'heading',\n    level: 1,\n    content: 'Input Element'\n  })\n  body.show('title')\n  tx.create({\n    id: 'intro',\n    type: 'paragraph',\n    content: [\n      \"You can use custom elements with an HTML input element\"\n    ].join('')\n  })\n  body.show('intro')\n  tx.create({\n    type: 'input-node',\n    id: 'input',\n    content: 'Lorem ipsum...'\n  })\n  body.show('input')\n  tx.create({\n    id: 'the-end',\n    type: 'paragraph',\n    content: 'That way you can implement editor functionality using class web development practices.'\n  })\n  body.show('the-end')\n}\n\n/*\n  Application\n*/\nlet cfg = new ProseEditorConfigurator()\ncfg.import(ProseEditorPackage)\ncfg.import(InputPackage)\n\nwindow.onload = function() {\n  let doc = cfg.createArticle(fixture)\n  let editorSession = new EditorSession(doc, {\n    configurator: cfg\n  })\n  ProseEditor.mount({\n    editorSession: editorSession\n  }, document.body)\n}\n"],"names":["DocumentNode","Component","ProseEditorConfigurator","ProseEditorPackage","EditorSession","ProseEditor"],"mappings":"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"}