{"version":3,"file":null,"sources":["../../inception/app.js"],"sourcesContent":["import {\n  Component, ContainerEditor, DocumentNode, EditorSession, ProseEditor, ProseEditorConfigurator, ProseEditorPackage\n} from 'substance'\n\n/*\n  Node display component\n*/\nclass RecursiveContainerComponent extends Component {\n\n  shouldRerender() {\n    return false\n  }\n\n  render($$) {\n    let doc = this.props.node.getDocument()\n    let el = $$('div').addClass('sc-container')\n    let body = doc.get('body')\n\n    let level = 0\n    let surfaceParent = this.context.surfaceParent\n    if (surfaceParent._isIsolatedNodeComponent) {\n      level = surfaceParent._getLevel()\n    }\n\n    if (level < 7) {\n      el.append(\n        $$(ContainerEditor, {\n          name: this.props.node.id,\n          node: body\n        }).ref('editor')\n      )\n    } else {\n      el.append($$('img').attr({\n        src: 'http://www.indiewire.com/wp-content/uploads/2014/05/the-terminator.jpg?w=780',\n        title: 'The Terminator',\n        alt: 'The Terminator'\n      }))\n    }\n    return el\n  }\n\n}\n\nRecursiveContainerComponent.fullWidth = true\n\n/*\n  Node definition\n*/\nclass RecursiveNode extends DocumentNode {}\n\nRecursiveNode.define({\n  type: 'recursive',\n  nodeId: 'id'\n})\n\n/*\n  Package definition of your plugin\n*/\nconst RecursivePackage = {\n  name: 'inception',\n  configure: function(config) {\n    config.addNode(RecursiveNode)\n    config.addComponent(RecursiveNode.type, RecursiveContainerComponent)\n  }\n}\n\n/*\n  Example document\n*/\nconst fixture = function(tx) {\n  var body = tx.get('body')\n\n  tx.create({\n    id: 'title',\n    type: 'heading',\n    level: 1,\n    content: 'Inception'\n  })\n  body.show('title')\n\n  tx.create({\n    id: 'intro',\n    type: 'paragraph',\n    content: [\n      \"In this document there is one node which is displaying the document's content itself again\",\n      \"up to a certain level where it ends with -- The Terminator.\"\n    ].join(' ')\n  })\n  body.show('intro')\n\n  tx.create({\n    id: 'p1',\n    type: 'paragraph',\n    content: [\n      \"This is way too crazy.\"\n    ].join(' ')\n  })\n\n  tx.create({\n    id: 'inception',\n    type: 'recursive',\n    nodeId: 'body'\n  })\n  body.show('inception')\n\n  tx.create({\n    id: 'the-end',\n    type: 'paragraph',\n    content: [\n      \"It really is.\"\n    ].join('')\n  })\n  body.show('the-end')\n}\n\n/*\n  Application\n*/\nlet cfg = new ProseEditorConfigurator()\ncfg.import(ProseEditorPackage)\ncfg.import(RecursivePackage)\n\nwindow.onload = function() {\n  let doc = cfg.createArticle(fixture)\n  let editorSession = new EditorSession(doc, {\n    configurator: cfg\n  })\n  ProseEditor.mount({\n    editorSession: editorSession\n  }, document.body)\n}"],"names":["Component","ContainerEditor","DocumentNode","ProseEditorConfigurator","ProseEditorPackage","EditorSession","ProseEditor"],"mappings":"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"}